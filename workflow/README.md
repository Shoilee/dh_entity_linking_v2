[edit](https://drive.google.com/file/d/16X1PiVgtSVrZNMkEIWW3eY17JztUH5w4/view?usp=sharing)




# Data 
1. [Bronbeek](https://surfdrive.surf.nl/files/index.php/f/14408030395) (format: csv)
2. [NMVW](https://surfdrive.surf.nl/files/index.php/apps/files/?dir=/Shared/Work%20Package%201B/data/linkedart_nmvw_data/ccrdfconst&fileid=12458101919) (format: rdf/ttl)



## Data Conversion
[convert_csv2rdf](convert_csv2rdf.py) script convert csv files into nq files based on the conversion metadata specifciations of the csv files in folder [conversion_metadata](conversion_metadata). 
- To run this script you need to provide path-to-directory where your csv and metadata is stored.
> Note: convert_csv2rdf.convert_csv_to_rdf() expects your csv and conversion metadata json file is in the same folder.


## Data Enrichment
Linked data enrichment with the [enrich_data_bronbeek](enrich_data_bronbeek) script to add provenance activity (i.e., acqusition events, former owner and objects related to person.)

```bash
python enrich_data_bronbeek.py <folder-path-of-all-nq-files>
```
> [enrich_data_bronbeek.py](enrich_data_bronbeek.py) expects .nq files.


# Linking

[All the experiment and the algorithm used can be found here](https://github.com/Shoilee/actor_linking)


# Upload
- Upload Bronbeek data
- Upload Bronbeek enriched
- Upload NMVW data
- Upload person-person links
- Upload ontologies (CIDOC, rdfs, etc)
## Upload to cliopatria

1. compress the .nq files with bash command
   ```bash
   gzip <path-to-folder>/*.nq
   ```

2. from cliopatria CLI, type
   ```
    rdf_library:rdf_attach_library(<path-directory-where-voild.ttl>).
    e.g., 
    rdf_library:rdf_attach_library("/Users/sarah_shoilee/Desktop/Sarah.nosync/Bronbeek_Data/csv_dump/LD").
    rdf_library:rdf_load_library('bronbeek')
    rdf_library:rdf_load_library('bronbeek-enriched')
   ```
> Note: [void.ttl](void.ttl) expects triple files are in the same folder as void.ttl.
3. upload nmvw ccrdfconst and ccrdfacqusiition.
   ```bash 
   rdf_library:rdf_attach_library("/Users/sarah_shoilee/PycharmProjects/entity_linking/nmvw_data/ccrdfconst").
    rdf_library:rdf_load_library('nmvw-ccrdfconst')
   
   ```

   ```bash 
   rdf_library:rdf_attach_library("/Users/sarah_shoilee/PycharmProjects/entity_linking/nmvw_data/ccrdfobjacquisition").
    rdf_library:rdf_load_library('nmvw-ccrdfobjacquisition')
   
   ```
4. upload links among constituents among two different institues generated by algorithms.


## SPARQL Queries


| ID    | CQs from Previous Paper   | Alternate CQs  Answers(v1)   |SPARQL Query   |  Alternate CQs  Answers(v2)   | SPARQL Query  |
| ----- | --------------------------| ------------------------ | ------------------------ | -------------- | -------------- |
| CQ-1  | Which persons were involved in the provenance of this object? | Is there any person involved in the provenance of this object with colonial background? |   | How many object's provenance has collection with connection with colonial context?        |  |
| CQ-1b |                                                               | Is there a possible relation between objects that are linked to a same person?     |                     ```SPARQL<br><br>PREFIX skos: <http://www.w3.org/2004/02/skos/core#><br><br>PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#><br><br>PREFIX owl: <http://www.w3.org/2002/07/owl#><br><br>PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/><br><br>  <br><br>SELECT ?name ?constituentID ?conxrefdetailID ?conxrefID ?object_bronbeek ?nmvw_constituent ?event ?nmvw_object<br><br>WHERE{<br><br>?constituentID <https://example.com/Bronbeek/Constituents/vocab/DisplayName> ?name .<br><br>?conxrefdetailID <https://example.com/ConXrefDetails/vocab/ConstituentID> ?constituentID .<br><br>?conxrefdetailID <https://example.com/ConXrefDetails/vocab/ConXrefID> ?conxrefID .<br><br>?conxrefID skos:related ?object_bronbeek .<br><br>?nmvw_constituent owl:sameAs ?constituentID .<br><br>?event ?p ?nmvw_constituent .<br><br>?nmvw_object ?p1 ?event .<br><br>?nmvw_object a crm:E22_Human-Made_Object .<br><br>} LIMIT 100<br><br>  <br><br>```| How many objects per person connected with on average?       |                     |
| CQ-2  | Which objects are collected by person A?        | Which objects are collected by person(s) with colonial history?                 |                             |    How objects are collected by person(s) with colonial history?     |                            |
| CQ-3  | Is there a relationship between person A and person B ?                              | Is there a relationship between person A and person B through object collection event?                |               | How many pair of people can be linked together?                       |                  |
| CQ-4  | Which objects were collected in this geographical location?                         | Which objects were collected in this geographical location from both dataset?                         |                   | How many objects are on average (potenially) from each geographic location?           |                  |
| CQ-5  | Which objects were collected during this event?                                     | Which objects were collected during this historical  event?                      |                                      | only If you can define the event with specific time and place? We do not need to put the historical events in the data for that.    |       |
| CQ-6  | Which objects were collected in this geographical location during this time period? | Which objects were potentially collected in this geographical location during this time period from both dataset?       | ```<br>PREFIX skos: <http://www.w3.org/2004/02/skos/core#><br>PREFIX owl: <http://www.w3.org/2002/07/owl#><br><br>SELECT *<br>WHERE{<br>  # ?s ?p ?nmvw_uri .<br>  ?nmvw_uri owl:sameAs <https://example.com/Constituents/7329> .<br>  ?conxrefDetails <https://example.com/ConXrefDetails/vocab/ConstituentID> <https://example.com/Constituents/7329> .<br>  ?conxrefDetails <https://example.com/ConXrefDetails/vocab/ConXrefID> ?conxref .<br>  ?conxref skos:related ?bronbeek_object .<br>}<br>``` |                 |                  |
|       |        |          |                 |        |                 |
